<div class="<%= proteins_percentage > 105 ? 'bg-green-50 border-green-300 shadow-green-100' : proteins_percentage >= 100 ? 'bg-green-50 border-green-300 shadow-green-100' : 'bg-white border-green-100' %> rounded-lg p-4 shadow-sm border transition-all duration-300">
  <div class="flex justify-between items-center mb-3">
    <div class="flex items-center">
      <h4 class="font-medium text-gray-700">Prot√©ines</h4>
      <% if proteins_percentage > 105 %>
        <div class="ml-2 flex items-center">
          <i class="fas fa-star text-green-500 mr-1"></i>
          <span class="text-xs font-medium text-green-600">EXCELLENT</span>
        </div>
      <% elsif proteins_percentage >= 100 %>
        <div class="ml-2 flex items-center">
          <i class="fas fa-check-circle text-green-500 mr-1"></i>
          <span class="text-xs font-medium text-green-600">ATTEINT</span>
        </div>
      <% end %>
    </div>
    <span class="text-sm <%= proteins_percentage > 105 ? 'text-green-600 font-medium' : proteins_percentage >= 100 ? 'text-green-600 font-medium' : 'text-gray-500' %>">
      <%= total_proteins.round(1) %> / <%= daily_protein_goal.round(1) %> g
    </span>
  </div>

  <div class="w-full bg-gray-200 rounded-full h-4 mb-3 relative overflow-hidden">
    <div class="h-4 rounded-full transition-all duration-500 <%= proteins_percentage > 105 ? 'bg-green-500' : proteins_percentage >= 100 ? 'bg-green-500' : 'bg-red-500' %>"
         style="width: <%= [proteins_percentage, 100].min %>%"></div>
    <% if proteins_percentage > 105 %>
      <div class="absolute inset-0 bg-green-300 opacity-30 animate-pulse"></div>
    <% end %>
  </div>

  <div class="flex justify-between items-center">
    <span class="text-sm font-bold <%= proteins_percentage > 105 ? 'text-green-700' : proteins_percentage >= 100 ? 'text-green-700' : 'text-red-700' %>">
      <%= proteins_percentage %>%
    </span>
    <% if proteins_percentage > 105 %>
      <span class="text-sm font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full">
        +<%= (total_proteins - daily_protein_goal).round(1) %> g
      </span>
    <% elsif proteins_percentage >= 100 %>
      <span class="text-sm font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full">
        <i class="fas fa-check mr-1"></i>Objectif atteint
      </span>
    <% else %>
      <span class="text-sm font-bold text-red-600 bg-red-100 px-2 py-1 rounded-full">
        -<%= (daily_protein_goal - total_proteins).round(1) %> g
      </span>
    <% end %>
  </div>
</div>
