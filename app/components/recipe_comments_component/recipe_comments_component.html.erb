<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 mb-8">
  <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-sm">
      <i class="fas fa-comments text-white text-lg"></i>
    </div>
    Commentaires
  </h3>

  <% if recipe.user == current_user %>
    <!-- Formulaire d'ajout de commentaire -->
    <div class="mb-8 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-100">
      <h4 class="text-sm font-semibold text-gray-800 mb-4 flex items-center">
        <i class="fas fa-plus-circle text-blue-600 mr-2"></i>
        Ajouter un commentaire
      </h4>
      <%= form_with model: [recipe, RecipeComment.new],
                    url: recipe_recipe_comments_path(recipe),
                    class: "space-y-4" do |f| %>

        <%= f.text_area :content,
                        rows: 3,
                        class: "w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none bg-white/80 backdrop-blur-sm",
                        placeholder: "Vos notes, modifications, conseils..." %>

        <div class="flex justify-end">
          <%= f.submit "Ajouter",
                        class: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors" %>
        </div>
      <% end %>
    </div>
  <% end %>

  <!-- Liste des commentaires -->
  <% if comments.any? %>
    <div class="space-y-6">
      <% comments.each do |comment| %>
        <div class="bg-white rounded-xl p-6 border border-gray-100 shadow-sm hover:shadow-md">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <div class="flex items-center mb-3">
                <div class="w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center mr-3">
                  <i class="fas fa-user text-white text-sm"></i>
                </div>
                <div class="flex flex-col">
                  <span class="text-sm font-medium text-gray-700">Vous</span>
                  <span class="text-xs text-gray-400 flex items-center">
                    <i class="fas fa-clock mr-1"></i>
                    <%= comment.created_at.strftime("%d/%m/%Y Ã  %H:%M") %>
                  </span>
                </div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500">
                <p class="text-gray-800 leading-relaxed text-sm"><%= comment.content %></p>
              </div>
            </div>

            <% if comment.user == current_user && recipe.user == current_user %>
              <div class="flex gap-2 ml-4">
                <%= button_to recipe_recipe_comment_path(recipe, comment),
                              method: :delete,
                              class: "w-8 h-8 text-red-600 hover:text-red-700 rounded-lg flex items-center justify-center",
                              data: { confirm: "Supprimer ce commentaire ?" } do %>
                  <i class="fas fa-trash text-sm"></i>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-12 text-gray-400">
      <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
      </div>
      <p class="text-lg font-medium text-gray-600 mb-2">Aucun commentaire pour le moment</p>
      <% if recipe.user == current_user %>
        <p class="text-sm">Ajoutez votre premier commentaire ci-dessus pour commencer</p>
      <% end %>
    </div>
  <% end %>
</div>
